# 桌面学习助手测试计划

## 1. 文档信息

| 项目 | 内容 |
|------|------|
| 文档名称 | 桌面学习助手测试计划 |
| 版本 | 1.0.0 |
| 创建日期 | 2026-01-31 |
| 作者 | 测试团队 |
| 审核人 | 待填写 |

---

## 2. 测试概述

### 2.1 项目背景

桌面学习助手是一款帮助用户从视频和文档中学习的桌面应用程序。本测试计划涵盖语音识别、截图、图像识别、AI内容生成和自动更新等核心服务的测试。

### 2.2 测试目标

1. 验证所有服务功能符合需求规格说明
2. 确保系统在各种边界条件下稳定运行
3. 验证错误处理机制的完整性
4. 确保配置验证的准确性
5. 验证API集成的正确性

### 2.3 测试范围

#### 2.3.1 包含范围

| 服务 | 测试内容 |
|------|----------|
| 语音识别服务 | 配置验证、WebSocket连接、音频处理、结果解析 |
| 截图服务 | 全屏截图、区域截图、文件操作、窗口管理 |
| 图像识别服务 | OCR识别、图像理解、百度API集成、千问VL集成 |
| AI内容生成服务 | 知识树生成、要点提取、疑难点标注、API调用 |
| 自动更新服务 | 更新检查、下载进度、状态管理、事件处理 |

#### 2.3.2 不包含范围

- 用户界面(UI)测试
- 性能压力测试
- 安全渗透测试
- 兼容性测试(不同操作系统版本)

---

## 3. 测试策略

### 3.1 测试类型

```
┌─────────────────────────────────────────────────────────────┐
│                      测试金字塔                              │
├─────────────────────────────────────────────────────────────┤
│                    ▲                                        │
│                   / \    E2E测试 (5%)                      │
│                  /   \                                      │
│                 /─────\   集成测试 (15%)                   │
│                /         \                                  │
│               /───────────\  单元测试 (80%)                │
│              /               \                              │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 测试方法

| 测试类型 | 方法 | 工具 | 覆盖率目标 |
|----------|------|------|-----------|
| 单元测试 | 白盒测试 | pytest | >= 80% |
| 集成测试 | 灰盒测试 | pytest + mock | >= 60% |
| 配置测试 | 黑盒测试 | pytest | 100% |
| 边界测试 | 黑盒测试 | pytest | 关键路径 |

### 3.3 测试优先级

| 优先级 | 描述 | 测试项 |
|--------|------|--------|
| P0 | 关键路径 | 配置验证、核心功能、错误处理 |
| P1 | 重要功能 | API集成、状态管理、文件操作 |
| P2 | 一般功能 | 事件处理、边界条件、异常场景 |
| P3 | 优化功能 | 性能、日志、辅助功能 |

---

## 4. 测试环境

### 4.1 硬件环境

| 配置项 | 最低配置 | 推荐配置 |
|--------|----------|----------|
| CPU | Intel i5 / AMD Ryzen 5 | Intel i7 / AMD Ryzen 7 |
| 内存 | 8 GB | 16 GB |
| 硬盘 | 10 GB 可用空间 | SSD 20 GB |
| 网络 | 宽带连接 | 高速宽带 |

### 4.2 软件环境

| 软件 | 版本 | 用途 |
|------|------|------|
| Python | 3.9+ | 测试脚本执行 |
| pytest | 7.4+ | 测试框架 |
| Node.js | 18+ | 应用运行 |
| Electron | 28+ | 桌面应用框架 |
| Windows | 10/11 | 主要测试平台 |

### 4.3 测试数据

| 数据类型 | 描述 | 存储位置 |
|----------|------|----------|
| 测试音频 | 16kHz 16-bit PCM | tests/data/audio/ |
| 测试图片 | PNG/JPEG 各种尺寸 | tests/data/images/ |
| 测试文档 | PDF/DOCX/TXT | tests/data/documents/ |
| Mock数据 | API响应模拟 | tests/python/conftest.py |

---

## 5. 测试进度

### 5.1 测试阶段

```
┌────────────────────────────────────────────────────────────────┐
│  阶段          │  时间范围           │  里程碑               │
├────────────────────────────────────────────────────────────────┤
│  测试准备      │  Day 1-2            │  环境搭建完成         │
│  单元测试      │  Day 3-10           │  核心服务测试完成     │
│  集成测试      │  Day 11-14          │  服务间集成完成       │
│  缺陷修复      │  Day 15-18          │  严重缺陷清零         │
│  回归测试      │  Day 19-20          │  测试报告发布         │
└────────────────────────────────────────────────────────────────┘
```

### 5.2 详细进度

| 任务ID | 任务描述 | 负责人 | 开始日期 | 结束日期 | 状态 |
|--------|----------|--------|----------|----------|------|
| T001 | 测试环境搭建 | 测试工程师 | Day 1 | Day 2 | 待开始 |
| T002 | 语音识别服务测试 | 测试工程师 | Day 3 | Day 5 | 待开始 |
| T003 | 截图服务测试 | 测试工程师 | Day 4 | Day 6 | 待开始 |
| T004 | 图像识别服务测试 | 测试工程师 | Day 5 | Day 7 | 待开始 |
| T005 | AI内容生成服务测试 | 测试工程师 | Day 6 | Day 8 | 待开始 |
| T006 | 自动更新服务测试 | 测试工程师 | Day 7 | Day 9 | 待开始 |
| T007 | 集成测试 | 测试工程师 | Day 11 | Day 14 | 待开始 |
| T008 | 缺陷跟踪与修复 | 开发团队 | Day 15 | Day 18 | 待开始 |
| T009 | 回归测试 | 测试工程师 | Day 19 | Day 20 | 待开始 |
| T010 | 测试报告编写 | 测试工程师 | Day 20 | Day 20 | 待开始 |

---

## 6. 测试用例概述

### 6.1 语音识别服务测试用例

| 用例ID | 用例名称 | 优先级 | 类型 |
|--------|----------|--------|------|
| SP001 | 有效配置验证 | P0 | 正向 |
| SP002 | 缺失API密钥验证 | P0 | 异常 |
| SP003 | WebSocket连接测试 | P0 | 功能 |
| SP004 | 音频帧构造测试 | P1 | 功能 |
| SP005 | 识别结果解析测试 | P1 | 功能 |
| SP006 | 网络错误处理 | P0 | 异常 |
| SP007 | 认证失败处理 | P0 | 异常 |
| SP008 | 空音频缓冲区处理 | P1 | 边界 |
| SP009 | 重连逻辑测试 | P1 | 功能 |
| SP010 | 状态转换测试 | P1 | 功能 |

### 6.2 截图服务测试用例

| 用例ID | 用例名称 | 优先级 | 类型 |
|--------|----------|--------|------|
| SS001 | 全屏截图测试 | P0 | 功能 |
| SS002 | 区域截图测试 | P0 | 功能 |
| SS003 | 截图数据结构设计 | P1 | 功能 |
| SS004 | 文件保存测试 | P0 | 功能 |
| SS005 | 文件删除测试 | P1 | 功能 |
| SS006 | 无效屏幕ID处理 | P1 | 异常 |
| SS007 | 零尺寸区域处理 | P1 | 边界 |
| SS008 | 全局快捷键测试 | P2 | 功能 |
| SS009 | 多屏幕支持测试 | P1 | 功能 |
| SS010 | 标注功能测试 | P2 | 功能 |

### 6.3 图像识别服务测试用例

| 用例ID | 用例名称 | 优先级 | 类型 |
|--------|----------|--------|------|
| IR001 | OCR配置验证 | P0 | 正向 |
| IR002 | 图像理解配置验证 | P0 | 正向 |
| IR003 | 百度Token获取测试 | P0 | 功能 |
| IR004 | OCR文本识别测试 | P0 | 功能 |
| IR005 | 图像理解测试 | P0 | 功能 |
| IR006 | Token刷新测试 | P1 | 功能 |
| IR007 | 无效图片格式处理 | P1 | 异常 |
| IR008 | 图片过大处理 | P1 | 边界 |
| IR009 | 空图片处理 | P1 | 边界 |
| IR010 | 组合识别测试 | P1 | 功能 |

### 6.4 AI内容生成服务测试用例

| 用例ID | 用例名称 | 优先级 | 类型 |
|--------|----------|--------|------|
| AI001 | API密钥验证 | P0 | 正向 |
| AI002 | 知识树生成测试 | P0 | 功能 |
| AI003 | 要点提取测试 | P0 | 功能 |
| AI004 | 疑难点标注测试 | P0 | 功能 |
| AI005 | 空内容处理 | P0 | 异常 |
| AI006 | 超长内容处理 | P0 | 边界 |
| AI007 | JSON解析测试 | P1 | 功能 |
| AI008 | API错误处理 | P0 | 异常 |
| AI009 | 配置更新测试 | P1 | 功能 |
| AI010 | Token限制处理 | P1 | 边界 |

### 6.5 自动更新服务测试用例

| 用例ID | 用例名称 | 优先级 | 类型 |
|--------|----------|--------|------|
| UP001 | 更新配置验证 | P1 | 正向 |
| UP002 | 更新检查测试 | P0 | 功能 |
| UP003 | 下载进度测试 | P1 | 功能 |
| UP004 | 状态管理测试 | P1 | 功能 |
| UP005 | 事件处理测试 | P1 | 功能 |
| UP006 | 网络错误处理 | P1 | 异常 |
| UP007 | 自动检查配置 | P2 | 功能 |
| UP008 | 窗口通信测试 | P1 | 功能 |
| UP009 | 安装重启测试 | P0 | 功能 |
| UP010 | 并发检查处理 | P1 | 边界 |

---

## 7. 风险评估

### 7.1 风险识别

| 风险ID | 风险描述 | 可能性 | 影响 | 缓解措施 |
|--------|----------|--------|------|----------|
| R001 | API密钥过期导致测试失败 | 中 | 高 | 使用Mock数据，定期更新密钥 |
| R002 | 网络不稳定影响集成测试 | 高 | 中 | 增加重试机制，离线Mock测试 |
| R003 | 测试环境配置复杂 | 中 | 中 | 编写详细环境搭建文档 |
| R004 | 第三方服务变更API | 低 | 高 | 监控API变更，版本锁定 |
| R005 | 测试时间不足 | 中 | 高 | 优先测试P0用例，迭代补充 |

### 7.2 风险矩阵

```
影响
高 │  R004      R001  R005
   │
中 │       R002  R003
   │
低 │
   └───────────────────────
      低    中    高    可能性
```

---

## 8. 准入/准出标准

### 8.1 测试准入标准

- [ ] 代码完成并通过代码审查
- [ ] 单元测试环境搭建完成
- [ ] 测试数据准备完成
- [ ] 测试用例评审通过

### 8.2 测试准出标准

- [ ] 所有P0用例执行通过
- [ ] 代码覆盖率达到80%
- [ ] 严重缺陷全部修复
- [ ] 一般缺陷修复率>=90%
- [ ] 测试报告评审通过

---

## 9. 角色与职责

| 角色 | 职责 | 人员 |
|------|------|------|
| 测试负责人 | 测试计划制定、进度跟踪、报告审核 | 待指定 |
| 测试工程师 | 用例设计、测试执行、缺陷提交 | 待指定 |
| 开发工程师 | 缺陷修复、测试支持 | 待指定 |
| 产品经理 | 需求确认、验收测试 | 待指定 |

---

## 10. 附录

### 10.1 参考文档

- 需求文档.md
- 项目计划.md
- 各服务技术选型报告

### 10.2 术语表

| 术语 | 定义 |
|------|------|
| OCR | Optical Character Recognition，光学字符识别 |
| WebSocket | 全双工通信协议 |
| Mock | 模拟对象/数据，用于隔离测试 |
| Fixture | pytest测试夹具，提供测试数据 |
| E2E | End-to-End，端到端测试 |

### 10.3 变更历史

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| 1.0.0 | 2026-01-31 | 初始版本 | 测试团队 |
