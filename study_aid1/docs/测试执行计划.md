# 测试执行计划

## 文档信息

| 项目 | 内容 |
|------|------|
| **项目名称** | 桌面学习助手 (Desktop Learning Assistant) |
| **文档版本** | v1.0 |
| **创建日期** | 2026-01-26 |
| **更新日期** | 2026-01-26 |
| **负责人** | 测试工程师 |

---

## 目录

1. [测试目标](#1-测试目标)
2. [测试范围](#2-测试范围)
3. [测试人员分配](#3-测试人员分配)
4. [测试时间表](#4-测试时间表)
5. [测试执行流程](#5-测试执行流程)
6. [缺陷管理流程](#6-缺陷管理流程)
7. [测试报告要求](#7-测试报告要求)

---

## 1. 测试目标

### 1.1 总体目标

- 验证所有功能模块的正确性和稳定性
- 发现并记录软件缺陷
- 确保软件质量达到发布标准
- 为开发团队提供修复依据

### 1.2 具体目标

| 目标编号 | 目标描述 | 验收标准 |
|----------|----------|----------|
| T-001 | 完成所有Python单元测试脚本的执行 | 100% 测试用例执行完成 |
| T-002 | 发现并记录所有功能缺陷 | 缺陷记录完整，包含复现步骤 |
| T-003 | 验证已修复缺陷 | 所有P0/P1缺陷修复并验证通过 |
| T-004 | 生成完整的测试报告 | 报告包含测试结果、缺陷汇总、质量评估 |

---

## 2. 测试范围

### 2.1 功能模块测试

| 模块 | 测试内容 | 测试脚本 | 优先级 |
|------|----------|----------|--------|
| **语音识别服务** | 配置验证、连接管理、音频发送、结果解析 | `test_speech_recognition.py` | P0 |
| **截图服务** | 全屏截图、区域截图、保存删除、快捷键 | `test_screenshot.py` | P0 |
| **图像识别服务** | OCR识别、图像理解、配置管理 | `test_image_recognition.py` | P0 |
| **AI内容生成服务** | 知识树生成、要点提取、疑难点标注 | `test_ai_content.py` | P0 |
| **自动更新服务** | 更新检查、下载安装、状态管理 | `test_updater.py` | P1 |

### 2.2 测试类型

| 测试类型 | 描述 | 覆盖范围 |
|----------|------|----------|
| **单元测试** | 测试单个函数/方法 | 所有服务方法 |
| **集成测试** | 测试多个组件协同工作 | 服务间交互 |
| **错误处理测试** | 测试异常和错误场景 | 所有错误处理路径 |
| **边界条件测试** | 测试极限值和边界情况 | 输入参数边界 |

---

## 3. 测试人员分配

### 3.1 人员角色

| 角色 | 人员 | 职责 |
|------|------|------|
| **测试负责人** | 测试工程师 | 整体测试规划、进度跟踪、报告汇总 |
| **功能测试员A** | 测试工程师A | 语音识别、截图功能测试 |
| **功能测试员B** | 测试工程师B | 图像识别、AI内容生成测试 |
| **功能测试员C** | 测试工程师C | 自动更新、集成测试 |

### 3.2 任务分配

#### 测试工程师A

| 任务 | 测试脚本 | 预计工时 | 优先级 |
|------|----------|----------|--------|
| 语音识别服务测试 | `test_speech_recognition.py` | 1天 | P0 |
| 截图服务测试 | `test_screenshot.py` | 1天 | P0 |
| 缺陷验证（负责模块） | - | 1天 | P0 |

#### 测试工程师B

| 任务 | 测试脚本 | 预计工时 | 优先级 |
|------|----------|----------|--------|
| 图像识别服务测试 | `test_image_recognition.py` | 1天 | P0 |
| AI内容生成服务测试 | `test_ai_content.py` | 1天 | P0 |
| 缺陷验证（负责模块） | - | 1天 | P0 |

#### 测试工程师C

| 任务 | 测试脚本 | 预计工时 | 优先级 |
|------|----------|----------|--------|
| 自动更新服务测试 | `test_updater.py` | 0.5天 | P1 |
| 集成测试 | `test_integration.py` | 1天 | P1 |
| 回归测试 | - | 0.5天 | P1 |

---

## 4. 测试时间表

### 4.1 总体时间规划

**测试周期**: 3个工作日 (2026-01-27 ~ 2026-01-29)

### 4.2 详细时间表

#### Day 1 (2026-01-27) - 测试执行

| 时间 | 测试工程师A | 测试工程师B | 测试工程师C |
|------|-------------|-------------|-------------|
| 09:00-10:00 | 环境准备、脚本熟悉 | 环境准备、脚本熟悉 | 环境准备、脚本熟悉 |
| 10:00-12:00 | 语音识别服务测试 | 图像识别服务测试 | 自动更新服务测试 |
| 13:00-15:00 | 截图服务测试 | AI内容生成服务测试 | 集成测试 |
| 15:00-17:00 | 缺陷记录、报告整理 | 缺陷记录、报告整理 | 缺陷记录、报告整理 |
| 17:00-18:00 | 日会：进度同步 | 日会：进度同步 | 日会：进度同步 |

#### Day 2 (2026-01-28) - 缺陷修复

| 时间 | 测试工程师A | 测试工程师B | 测试工程师C |
|------|-------------|-------------|-------------|
| 09:00-10:00 | 缺陷评审会议 | 缺陷评审会议 | 缺陷评审会议 |
| 10:00-12:00 | 协助开发复现缺陷 | 协助开发复现缺陷 | 回归测试 |
| 13:00-17:00 | 缺陷验证（修复后） | 缺陷验证（修复后） | 补充测试 |
| 17:00-18:00 | 日会：修复进度同步 | 日会：修复进度同步 | 日会：修复进度同步 |

#### Day 3 (2026-01-29) - 回归测试与报告

| 时间 | 测试工程师A | 测试工程师B | 测试工程师C |
|------|-------------|-------------|-------------|
| 09:00-12:00 | 回归测试 | 回归测试 | 性能测试 |
| 13:00-15:00 | 缺陷验证 | 缺陷验证 | 文档整理 |
| 15:00-17:00 | 测试报告编写 | 测试报告编写 | 测试报告汇总 |
| 17:00-18:00 | 测试总结会议 | 测试总结会议 | 测试总结会议 |

---

## 5. 测试执行流程

### 5.1 执行前准备

1. **环境检查**
   ```bash
   # 检查Python环境
   python --version  # 需要 3.8+

   # 安装依赖
   cd tests/python
   pip install -r requirements.txt

   # 验证安装
   pytest --version
   ```

2. **配置文件准备**
   - 复制 `config.example.json` 到 `config.test.json`
   - 填写测试用的API密钥（使用测试环境密钥）
   - 确保配置文件不被提交到版本控制

3. **测试数据准备**
   - 准备测试用的音频文件
   - 准备测试用的图片文件
   - 准备测试用的文档文件

### 5.2 测试执行步骤

1. **运行测试**
   ```bash
   # 使用自动化脚本运行测试
   python scripts/testing/run_tests.py --service speech --coverage --html

   # 或者直接使用pytest
   cd tests/python
   pytest test_speech_recognition.py -v --tb=short
   ```

2. **记录结果**
   - 保存测试输出到日志文件
   - 记录失败的测试用例
   - 截图保存错误信息

3. **生成报告**
   ```bash
   # 生成缺陷报告
   python scripts/testing/generate_bug_report.py \
       --input test-results.xml \
       --format markdown \
       --output bug-report.md
   ```

### 5.3 执行后处理

1. **整理测试结果**
   - 汇总所有测试用例的执行情况
   - 分类统计通过/失败/跳过的用例
   - 计算测试覆盖率

2. **更新缺陷跟踪表**
   - 在 `docs/缺陷跟踪.md` 中记录新发现的缺陷
   - 分配缺陷优先级和负责人
   - 更新缺陷状态

---

## 6. 缺陷管理流程

### 6.1 缺陷生命周期

```
发现缺陷 → 记录缺陷 → 分配修复 → 开发修复 → 测试验证 → 关闭缺陷
   ↑                                                    |
   └──────────────── 验证失败 ──────────────────────────┘
```

### 6.2 缺陷优先级定义

| 优先级 | 定义 | 响应时间 | 修复时间 |
|--------|------|----------|----------|
| **P0 - 紧急** | 系统崩溃、数据丢失、核心功能不可用 | 立即 | 4小时内 |
| **P1 - 高** | 主要功能异常、性能严重下降 | 2小时内 | 1天内 |
| **P2 - 中** | 次要功能异常、有 workaround | 1天内 | 3天内 |
| **P3 - 低** | UI问题、建议优化 | 3天内 | 下次迭代 |

### 6.3 缺陷状态流转

| 状态 | 说明 | 责任人 |
|------|------|--------|
| **新提交** | 刚发现的缺陷 | 测试人员 |
| **已确认** | 开发确认是缺陷 | 开发人员 |
| **处理中** | 正在修复 | 开发人员 |
| **待验证** | 修复完成等待验证 | 测试人员 |
| **已关闭** | 验证通过 | 测试人员 |
| **已拒绝** | 不是缺陷或无法复现 | 开发人员 |
| **已延期** | 推迟到后续版本修复 | 项目经理 |

### 6.4 缺陷记录模板

```markdown
### Bug-XXX: [缺陷标题]

**发现日期**: YYYY-MM-DD
**发现人员**: [测试人员]
**优先级**: P0/P1/P2/P3
**状态**: 新提交/已确认/处理中/待验证/已关闭
**所属模块**: [功能模块]

**问题描述**:
[详细描述缺陷现象]

**复现步骤**:
1. [步骤1]
2. [步骤2]
3. [步骤3]

**预期结果**:
[描述预期的正确行为]

**实际结果**:
[描述实际的错误行为]

**环境信息**:
- OS: [操作系统版本]
- Python: [Python版本]
- 分支: [Git分支]
- 提交: [Git提交哈希]

**日志/截图**:
[附上相关日志或截图]

**修复信息**:
- **修复人员**: [开发人员]
- **修复日期**: YYYY-MM-DD
- **修复提交**: [Git提交哈希]
- **修复说明**: [修复内容说明]

**验证信息**:
- **验证人员**: [测试人员]
- **验证日期**: YYYY-MM-DD
- **验证结果**: 通过/失败
- **验证说明**: [验证内容说明]
```

---

## 7. 测试报告要求

### 7.1 日报内容

每日17:00前提交日报，包含：

1. **今日完成工作**
   - 执行的测试用例数
   - 发现的缺陷数
   - 验证的缺陷数

2. **明日计划**
   - 计划执行的测试用例
   - 计划验证的缺陷

3. **阻塞问题**
   - 需要协调的问题
   - 需要资源支持的问题

### 7.2 测试执行报告

测试完成后提交完整报告，包含：

1. **测试概览**
   - 测试时间范围
   - 测试用例总数
   - 通过率统计

2. **详细结果**
   - 各模块测试结果
   - 失败的测试用例详情
   - 覆盖率报告

3. **缺陷汇总**
   - 缺陷总数
   - 按优先级统计
   - 按模块统计
   - 缺陷列表

4. **质量评估**
   - 整体质量评价
   - 风险评估
   - 发布建议

5. **附录**
   - 测试日志
   - 配置文件
   - 环境信息

---

## 附录

### A. 常用命令

```bash
# 运行所有测试
cd tests/python
pytest

# 运行特定服务测试
pytest test_speech_recognition.py -v

# 生成覆盖率报告
pytest --cov=src --cov-report=html --cov-report=xml

# 运行特定标记的测试
pytest -m "unit and not slow"

# 并行执行测试
pytest -n auto

# 生成测试报告
python scripts/testing/run_tests.py --coverage --html --json

# 生成缺陷报告
python scripts/testing/generate_bug_report.py \
    --input test-results.xml \
    --format markdown \
    --output docs/bug-report-$(date +%Y%m%d).md
```

### B. 联系方式

| 角色 | 姓名 | 联系方式 |
|------|------|----------|
| 测试负责人 | [姓名] | [邮箱/电话] |
| 开发负责人 | [姓名] | [邮箱/电话] |
| 项目经理 | [姓名] | [邮箱/电话] |

### C. 参考文档

- [测试计划.md](./测试计划.md)
- [缺陷跟踪.md](./缺陷跟踪.md)
- [测试执行报告.md](./测试执行报告.md)
- [项目进度报告.md](../项目进度报告.md)

---

**文档版本历史**

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|----------|--------|
| v1.0 | 2026-01-26 | 初始版本 | 测试工程师 |
